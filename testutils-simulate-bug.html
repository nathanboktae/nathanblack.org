<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mocha/3.5.0/mocha.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mocha/3.5.0/mocha.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/chai/4.1.1/chai.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/15.6.1/react-with-addons.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/15.6.1/react-dom.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/sinon.js/3.2.1/sinon.min.js"></script>
</head>
<body>
  <div id="mocha"></div>
  <script>
    mocha.setup("bdd")
    var should = chai.should()

    describe('TestUtils.Simulate.click', () => {
      let clickHandler = sinon.spy(() => console.log('I was clicked!')),
      DummyComp = ({ greet }) => React.createElement('div', { className: 'dummy', onClick: clickHandler }, greet),
      testEl

      beforeEach(() => {
        testEl = document.createElement('div')
        if (window.location.search.indexOf('attach') !== -1) {
          document.body.appendChild(testEl)
        }
        ReactDOM.render(React.createElement(DummyComp, { greet: "hi" }), testEl)
      })

      it('should trigger a click', function() {
        React.addons.TestUtils.Simulate.click(testEl.querySelector('.dummy'))
        clickHandler.callCount.should.equal(1)
      })
    })

    mocha.run()
  </script>
</body>
</html>